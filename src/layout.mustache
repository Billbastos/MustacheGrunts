<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="../css/application.css">
    <title></title>
</head>
<body>

<!-- HEADER -->
<div class="col-md-12 col-md-offset-0">
    <div class="page-header">
        <h1>Company <small>Products</small></h1>
    </div>
</div>


<!-- CATEGORIES -->
<div class="col-md-2">

    <div class="row">

        <div class="col-md-12">

            <div class="list-group">
                {{>content}}
            </div>

        </div>
    </div>
</div>

<!-- PRODUCTS -->
<div class="col-md-10">

    {{>teste}}

    <div class="row">
        <div class="col-xs-6 col-md-3" id="t1">
            <a href="#" class="thumbnail">
                <img src="../images/download.svg" alt="pd">
            </a>
        </div>
        <div class="col-xs-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="../images/download.svg" alt="pd">
            </a>
        </div>
        <div class="col-xs-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="../images/download.svg" alt="pd">
            </a>
        </div>
        <div class="col-xs-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="../images/download.svg" alt="pd">
            </a>
        </div>
    </div>

    <div class="row">
        <div class="col-xs-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="../images/download.svg" alt="pd">
            </a>
        </div>
        <div class="col-xs-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="../images/download.svg" alt="pd">
            </a>
        </div>
        <div class="col-xs-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="../images/download.svg" alt="pd">
            </a>
        </div>
        <div class="col-xs-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="../images/download.svg" alt="pd">
            </a>
        </div>
    </div>

    <div class="row">
        <div class="col-xs-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="../images/download.svg" alt="pd">
            </a>
        </div>
        <div class="col-xs-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="../images/download.svg" alt="pd">
            </a>
        </div>
        <div class="col-xs-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="../images/download.svg" alt="pd">
            </a>
        </div>
        <div class="col-xs-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="../images/download.svg" alt="pd">
            </a>
        </div>
    </div>

    <div class="row">
        <div class="col-xs-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="../images/download.svg" alt="pd">
            </a>
        </div>
        <div class="col-xs-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="../images/download.svg" alt="pd">
            </a>
        </div>
        <div class="col-xs-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="../images/download.svg" alt="pd">
            </a>
        </div>
        <div class="col-xs-6 col-md-3">
            <a href="#" class="thumbnail">
                <img src="../images/download.svg" alt="pd">
            </a>
        </div>
    </div>

</div>

<!-- MODAL -->
<div class="col-md-12 modal" id="modal">
    <div class="row">
        <div class="col-md-6 col-md-offset-3 innerModal">
            <div class="row">
                <div class="col-md-12 ">
                    <a href="#" class="">
                        <img src="../images/download.svg" alt="pd">
                    </a>
                </div>
                <div class="col-md-12 "><h2>title</h2></div>
                <div class="col-md-12 ">short description of product</div>
            </div>
        </div>
    </div>
</div>

<!-- SCRIPTS -->
<script language="javascript" type="application/javascript" src="../js/products.js"></script>
<script language="javascript" type="application/javascript" src="../js/category.js"></script>
<script>

    var prod = document.getElementById("t1");
    var mod = document.getElementById("modal");

    prod.onclick = function () {
        mod.setAttribute("style", "display:block; background: rgba(0, 0, 0, 0.6);");
    };

    mod.onclick = function () {
        mod.setAttribute("style", "display:none;");
    };

    var ps3 = new Product("Playstation 3", 199.00, "http://test/img1.jpg");
    var ps4 = new Product("Playstation 4", 349.99, "http://test/img2.jpg");
    var cat = new Category(1,"Best",123);

    console.log(ps3.toJson());
    console.log(ps4.toJson());
    console.log(cat.toJson());


    var xmlhttp = new XMLHttpRequest();
    var url = "http://www.bestbuy.ca/api/v2/json/category/departments";

    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            //var myArr = JSON.parse(xmlhttp.responseText);
            var myArr = JSON.parse(xmlhttp.responseText);
            myFunction(myArr);
        }
    }

    xmlhttp.open("GET", url, true);
    xmlhttp.send();

    function myFunction(arr) {
        var cats = [];
        for(var i = 0; i < arr.length; i++) {
            for(var j=0; j < arr[i].subCategories.length; j++) {

                var catg = new Category(arr[i].subCategories[j].id, arr[i].subCategories[j].name, arr[i].subCategories[j].productCount);
                cats.push(catg);
            }
        }
        console.log(cats);
    }


</script>

</body>
</html>